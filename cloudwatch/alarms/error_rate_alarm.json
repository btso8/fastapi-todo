{
  "AlarmName": "apprunner-error-rate-high",
  "AlarmDescription": "App Runner error rate > threshold",
  "ComparisonOperator": "GreaterThanThreshold",
  "EvaluationPeriods": 3,
  "Threshold": 1.0,
  "TreatMissingData": "notBreaching",
  "Metrics": [
    {
      "Id": "m_requests",
      "MetricStat": {
        "Metric": {
          "Namespace": "AWS/AppRunner",
          "MetricName": "Requests",
          "Dimensions": [
            {
              "Name": "ServiceName",
              "Value": "REPLACE_SERVICE_NAME"
            }
          ]
        },
        "Period": 60,
        "Stat": "Sum"
      },
      "ReturnData": false
    },
    {
      "Id": "m_4xx",
      "MetricStat": {
        "Metric": {
          "Namespace": "AWS/AppRunner",
          "MetricName": "4xxStatusResponses",
          "Dimensions": [
            {
              "Name": "ServiceName",
              "Value": "REPLACE_SERVICE_NAME"
            }
          ]
        },
        "Period": 60,
        "Stat": "Sum"
      },
      "ReturnData": false
    },
    {
      "Id": "m_5xx",
      "MetricStat": {
        "Metric": {
          "Namespace": "AWS/AppRunner",
          "MetricName": "5xxStatusResponses",
          "Dimensions": [
            {
              "Name": "ServiceName",
              "Value": "REPLACE_SERVICE_NAME"
            }
          ]
        },
        "Period": 60,
        "Stat": "Sum"
      },
      "ReturnData": false
    },
    {
      "Id": "e_error_rate",
      "Expression": "(m_4xx + m_5xx) / IF(m_requests, m_requests, 1) * 100",
      "Label": "ErrorRatePercent",
      "ReturnData": true
    }
  ]
}
